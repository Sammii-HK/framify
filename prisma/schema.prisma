generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model PromptTemplate {
  id          String   @id @default(cuid())
  name        String
  prompt      String
  description String?
  category    String?
  tags        String[] @default([])
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

model Template {
  id             String     @id @default(cuid())
  userId         String
  title          String
  prompt         String
  style          String
  code           String
  framerUrl      String?
  createdAt      DateTime   @default(now())
  isPublic       Boolean    @default(false)
  price          Float?
  description    String?
  tags           String[]   @default([])
  category       String?
  licenseType    String?    @default("personal")
  thumbnailUrl   String?
  viewCount      Int        @default(0)
  downloadCount  Int        @default(0)
  salesCount     Int        @default(0)
  featured       Boolean    @default(false)
  baseTemplateId String?
  Template       Template?  @relation("TemplateToTemplate", fields: [baseTemplateId], references: [id])
  other_Template Template[] @relation("TemplateToTemplate")
  components     Component[]
}

model Component {
  id              String    @id @default(cuid())
  templateId      String?
  userId          String
  name            String
  code            String
  description     String?
  componentType  String
  price           Float?
  isPublic        Boolean   @default(false)
  tags            String[]  @default([])
  category        String?
  licenseType     String?   @default("personal")
  thumbnailUrl    String?
  framerUrl       String?
  previewUrl      String?
  viewCount       Int       @default(0)
  downloadCount   Int       @default(0)
  salesCount      Int       @default(0)
  featured        Boolean   @default(false)
  marketplaceReady Boolean  @default(false)
  marketplaceUrl  String?
  createdAt       DateTime  @default(now())
  updatedAt       DateTime  @updatedAt
  
  template        Template? @relation(fields: [templateId], references: [id])
}
